{"ast":null,"code":"/**\n * Navbar Component\n *\n * Authors: Dawid Olko & Piotr SmoÅ‚a\n * Date: 2025-11-02\n * Version: 2.0\n *\n * Main navigation bar component with responsive design, user authentication,\n * and dynamic category menu.\n *\n * Features:\n *   - Responsive hamburger menu for mobile devices\n *   - Dynamic background color on scroll\n *   - User authentication state display\n *   - User dropdown menu (Profile/Admin Panel/Logout)\n *   - Shopping cart preview with item count\n *   - Favorites counter with heart icon\n *   - Search modal integration\n *   - Category dropdown menu\n *   - Sticky navigation on scroll\n *   - Role-based menu items (client vs admin)\n *\n * Navigation Links:\n *   - Home - Main landing page\n *   - Shop - Product catalog with categories\n *   - About - Company information\n *   - Blog - Articles and news\n *   - FAQ - Frequently asked questions\n *   - Contact - Contact form\n *   - Cart - Shopping cart page\n *   - Favorites - Saved products\n *\n * User Menu (Authenticated):\n *   - Client Panel - Order history, recommendations, insights\n *   - Admin Panel - Product/order/user management (admin only)\n *   - Logout - Clear session and redirect\n *\n * State Management:\n *   - isOpen: Mobile menu toggle state\n *   - navBgc: Background color change on scroll\n *   - showUserDropdown: User menu dropdown visibility\n *   - categories: Product categories from API\n *   - searchModalOpen: Search modal visibility\n *   - user: Current authenticated user from AuthContext\n *   - favorites: Favorites count from FavoritesContext\n *   - cart items: From CartContext\n *\n * API Endpoints:\n *   - GET /api/categories/ - Fetch product categories\n *\n * Authentication:\n *   - Reads user from localStorage on mount\n *   - Displays login/register or user icon based on auth state\n *   - Logout clears access token and user data\n *\n * @component\n * @returns {React.ReactElement} Navigation bar with responsive menu\n */import\"./Navbar.scss\";import{Link,NavLink,useNavigate}from\"react-router-dom\";import{useState,useEffect,useContext}from\"react\";import{GiHamburgerMenu}from\"react-icons/gi\";import{AiOutlineClose,AiOutlineHeart,AiOutlineSearch}from\"react-icons/ai\";import{FaUserCircle}from\"react-icons/fa\";import{useFavorites}from\"../FavoritesContent/FavoritesContext\";import CartPreview from\"../CartContent/CartPreview\";import SearchModal from\"./SearchModal\";import axios from\"axios\";import config from\"../../config/config\";import{CartContext}from\"../ShopContext/ShopContext\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=()=>{const{favorites}=useFavorites();useContext(CartContext);const{user,setUser}=useContext(AuthContext);const navigate=useNavigate();const[isOpen,setIsOpen]=useState(false);const[navBgc,setNavBgc]=useState(false);const[showUserDropdown,setShowUserDropdown]=useState(false);const[categories,setCategories]=useState([]);const[showModal,setShowModal]=useState(true);const[searchModalOpen,setSearchModalOpen]=useState(false);useEffect(()=>{const savedUser=localStorage.getItem(\"loggedUser\");if(savedUser){setUser(JSON.parse(savedUser));}},[setUser]);useEffect(()=>{const changeBgc=()=>{setNavBgc(window.scrollY>10);};window.addEventListener(\"scroll\",changeBgc);return()=>{window.removeEventListener(\"scroll\",changeBgc);};},[]);useEffect(()=>{const handleScroll=()=>{if(window.scrollY>0&&showModal){setShowModal(false);}};window.addEventListener(\"scroll\",handleScroll);return()=>{window.removeEventListener(\"scroll\",handleScroll);};},[showModal]);useEffect(()=>{axios.get(`${config.apiUrl}/api/categories/`).then(res=>setCategories(res.data)).catch(err=>console.error(\"Error fetching categories:\",err));},[]);const handleClick=()=>setIsOpen(!isOpen);const closeNav=()=>setIsOpen(false);const handleUserIconHover=()=>{setShowUserDropdown(true);};const handleUserIconLeave=()=>{setShowUserDropdown(false);};const handleLogout=()=>{localStorage.removeItem(\"access\");localStorage.removeItem(\"loggedUser\");window.location.href=\"/login\";};const panelPrefix=user&&user.role===\"admin\"?\"/admin\":\"/client\";const closeModal=()=>setShowModal(false);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"nav\",{className:navBgc?\"navbar navbar__bgc\":\"navbar\",children:[showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal__text\",children:\"Want to feel the magic of technology? Check out our products. Save up to $100!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal__actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal__button\",onClick:()=>navigate(\"/shop\"),children:\"View products\"}),/*#__PURE__*/_jsx(AiOutlineClose,{className:\"modal__close\",onClick:closeModal})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar__logo-wrapper\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"header__logo\",children:/*#__PURE__*/_jsx(\"p\",{className:\"header__logo-text\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar__main__section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__container container nav_con\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"header__logo__display\",children:/*#__PURE__*/_jsx(\"p\",{className:\"header__logo-text\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__user\",onMouseEnter:handleUserIconHover,onMouseLeave:handleUserIconLeave,style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(FaUserCircle,{className:\"navbar__user-icon\",onClick:()=>setShowUserDropdown(!showUserDropdown)}),showUserDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"navbar__user-dropdown\",children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:`${panelPrefix}/account`,className:\"navbar__dropdown-link\",children:\"Your Account\"}),/*#__PURE__*/_jsx(Link,{to:`${panelPrefix}/orders`,className:\"navbar__dropdown-link\",children:\"Orders\"}),/*#__PURE__*/_jsx(Link,{to:panelPrefix,className:\"navbar__dropdown-link\",children:\"Go to Panel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"navbar__logoutBtn\",children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"navbar__dropdown-link\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"navbar__dropdown-link\",children:\"Register\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar__search-wrapper\",children:/*#__PURE__*/_jsx(\"button\",{className:\"search-icon\",onClick:()=>setSearchModalOpen(true),children:/*#__PURE__*/_jsx(AiOutlineSearch,{})})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:isOpen?\"navbar__links navbar__links-active\":\"navbar__links\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{className:\"navbar__link\",to:\"/\",onClick:closeNav,children:\"HOME\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{className:\"navbar__link\",to:\"/about\",onClick:closeNav,children:\"ABOUT\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{className:\"navbar__link\",to:\"/shop\",onClick:closeNav,children:\"SHOP\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{className:\"navbar__link\",to:\"/faq\",onClick:closeNav,children:\"FAQ\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(NavLink,{className:\"navbar__link\",to:\"/blog\",onClick:closeNav,children:\"BLOG\"})}),/*#__PURE__*/_jsxs(\"li\",{className:\"navbar__categories\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"navbar__link\",children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"div\",{className:`navbar__dropdown ${isOpen?\"active\":\"\"}`,children:Object.entries(categories.reduce((acc,category)=>{const[main,sub]=category.name.split(\".\");if(!acc[main])acc[main]=[];if(sub)acc[main].push(sub);return acc;},{})).map(_ref=>{let[mainCategory,subCategories]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__main-category\",onMouseEnter:e=>{e.currentTarget.classList.add(\"hover\");},onMouseLeave:e=>{e.currentTarget.classList.remove(\"hover\");},children:[/*#__PURE__*/_jsx(NavLink,{to:`/category/${mainCategory}`,className:\"navbar__main-category-name\",onClick:closeNav,children:mainCategory.toUpperCase()}),subCategories.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"navbar__subcategories\",children:subCategories.map(subCategory=>/*#__PURE__*/_jsx(NavLink,{to:`/category/${mainCategory}.${subCategory}`,className:\"navbar__dropdown-item\",onClick:closeNav,children:subCategory},subCategory))})]},mainCategory);})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"navbar__icons\",children:[/*#__PURE__*/_jsx(NavLink,{className:\"navbar__favorites-link\",to:\"/favorites\",onClick:closeNav,children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar__favorites\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"navbar__quantity\",children:favorites.length}),/*#__PURE__*/_jsx(AiOutlineHeart,{className:\"navbar__heart\"})]})}),/*#__PURE__*/_jsx(CartPreview,{})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar__hamburger\",onClick:handleClick,children:isOpen?/*#__PURE__*/_jsx(AiOutlineClose,{}):/*#__PURE__*/_jsx(GiHamburgerMenu,{})})]})})]}),/*#__PURE__*/_jsx(SearchModal,{isOpen:searchModalOpen,onClose:()=>setSearchModalOpen(false)})]});};export default Navbar;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}