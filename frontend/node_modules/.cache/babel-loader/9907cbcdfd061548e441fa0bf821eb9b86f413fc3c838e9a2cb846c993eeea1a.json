{"ast":null,"code":"import{createContext,useEffect,useState}from\"react\";import axios from\"axios\";import config from\"../../config/config\";import{mockAPI}from\"../../utils/mockData\";import{jsx as _jsx}from\"react/jsx-runtime\";export const CartContext=/*#__PURE__*/createContext(null);const getStoredCart=()=>{const storedCart=localStorage.getItem(\"cart\");return storedCart?JSON.parse(storedCart):{};};const ShopContext=props=>{const[items,setItems]=useState(getStoredCart());const[products,setProducts]=useState([]);useEffect(()=>{const fetchProducts=async()=>{try{if(config.useMockData){const data=await mockAPI.getProducts();setProducts(data);}else{const response=await axios.get(`${config.apiUrl}/api/products/`);setProducts(response.data);}}catch(error){console.error(\"Error fetching products:\",error);}};fetchProducts();},[]);useEffect(()=>{localStorage.setItem(\"cart\",JSON.stringify(items));},[items]);const addToCart=itemId=>{setItems(prev=>({...prev,[itemId]:(prev[itemId]||0)+1}));};const removeFromCart=itemId=>{setItems(prev=>({...prev,[itemId]:Math.max((prev[itemId]||0)-1,0)}));};const resetCart=()=>{setItems({});};const totalAmount=()=>{return Object.entries(items).reduce((total,_ref)=>{let[itemId,quantity]=_ref;const product=products.find(product=>product.id===Number(itemId));return product?total+product.price*quantity:total;},0);};const totalCartItems=()=>{return Object.values(items).reduce((sum,quantity)=>sum+quantity,0);};const contextValue={items,addToCart,removeFromCart,totalAmount,totalCartItems,resetCart};return/*#__PURE__*/_jsx(CartContext.Provider,{value:contextValue,children:props.children});};export default ShopContext;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}