{"ast":null,"code":"/**\n * ShopContent Component\n *\n * Authors: Dawid Olko & Piotr SmoÅ‚a\n * Date: 2025-11-02\n * Version: 2.0\n *\n * Main shop page component that displays product catalog with category filtering,\n * pagination, and responsive sidebar navigation.\n *\n * Features:\n *   - Hierarchical category filtering (main categories + subcategories)\n *   - Product grid with pagination (30 products per page)\n *   - Responsive sidebar (collapsible on mobile)\n *   - Dynamic icon mapping for categories\n *   - URL-based category selection (deep linking)\n *   - Loading states for better UX\n *   - Expandable category groups\n *\n * Category Structure:\n *   - Main categories (e.g., \"Electronics\")\n *   - Subcategories (e.g., \"Electronics.Laptops\")\n *   - URL format: /shop/:category (e.g., /shop/Electronics.Laptops)\n *\n * State Management:\n *   - selectedMainCategory: Current main category filter\n *   - selectedSubCategory: Current subcategory filter\n *   - products: Array of all products from API\n *   - categories: Array of available category names\n *   - currentPage: Active pagination page number\n *   - isSidebarOpen: Sidebar visibility toggle (responsive)\n *   - expandedCategories: List of expanded category groups\n *\n * API Endpoints:\n *   - GET /api/categories/ - Fetch all categories\n *   - GET /api/products/ - Fetch all products\n *\n * @component\n * @returns {React.ReactElement} Shop page with category sidebar and product grid\n */import{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import\"./ShopContent.scss\";import ShopProduct from\"./ShopProduct\";import config from\"../../config/config\";import{mockAPI}from\"../../utils/mockData\";import{IoHomeOutline}from\"react-icons/io5\";import{RiArrowDownSLine,RiArrowUpSLine}from\"react-icons/ri\";import{FaBox,FaTshirt,FaLaptop,FaGamepad,FaTools,FaCamera,FaBrush,FaClock,FaBatteryFull,FaHdd,FaMouse,FaDesktop,FaPlane,FaMicrochip,FaSitemap,FaCouch,FaTv}from\"react-icons/fa\";import{ChevronLeft,ChevronRight}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShopContent=()=>{const{category}=useParams();const navigate=useNavigate();const[selectedMainCategory,setSelectedMainCategory]=useState(\"all\");const[selectedSubCategory,setSelectedSubCategory]=useState(\"all\");const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[isSidebarOpen,setIsSidebarOpen]=useState(true);const[isLoadingProducts,setIsLoadingProducts]=useState(true);const[isLoadingCategories,setIsLoadingCategories]=useState(true);const[expandedCategories,setExpandedCategories]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[productsPerPage]=useState(30);useEffect(()=>{if(category){const parts=category.split(\".\");setSelectedMainCategory(parts[0]||\"all\");setSelectedSubCategory(parts[1]||\"all\");}},[category]);useEffect(()=>{const fetchCategories=async()=>{try{if(config.useMockData){const data=await mockAPI.getCategories();setCategories(data.map(cat=>cat.name));}else{const response=await fetch(`${config.apiUrl}/api/categories/`);const data=await response.json();setCategories(data.map(cat=>cat.name));}setIsLoadingCategories(false);}catch(error){console.error(\"Error fetching categories:\",error);setIsLoadingCategories(false);}};const fetchProducts=async()=>{try{if(config.useMockData){const data=await mockAPI.getProducts();setProducts(data);}else{const response=await fetch(`${config.apiUrl}/api/products/`);const data=await response.json();setProducts(data);}setIsLoadingProducts(false);}catch(error){console.error(\"Error fetching products:\",error);setIsLoadingProducts(false);}};fetchCategories();fetchProducts();const handleResize=()=>{if(window.innerWidth<868){setIsSidebarOpen(false);}else{setIsSidebarOpen(true);}};window.addEventListener(\"resize\",handleResize);handleResize();return()=>window.removeEventListener(\"resize\",handleResize);},[]);useEffect(()=>{setCurrentPage(1);},[selectedMainCategory,selectedSubCategory]);const mainCategories=Array.from(new Set(categories.map(cat=>cat.split(\".\")[0])));const subCategories=selectedMainCategory!==\"all\"?categories.filter(cat=>cat.startsWith(selectedMainCategory+\".\")).map(cat=>cat.split(\".\")[1]):[];const filteredProducts=products.filter(product=>{const matchesCategory=selectedMainCategory===\"all\"||product.categories.some(prodCat=>{const[prodMain,prodSub=\"all\"]=prodCat.split(\".\");return selectedSubCategory===\"all\"?prodMain===selectedMainCategory:prodMain===selectedMainCategory&&prodSub===selectedSubCategory;});return matchesCategory;});const totalProducts=filteredProducts.length;const totalPages=Math.ceil(totalProducts/productsPerPage);const indexOfLastProduct=currentPage*productsPerPage;const indexOfFirstProduct=indexOfLastProduct-productsPerPage;const currentProducts=filteredProducts.slice(indexOfFirstProduct,indexOfLastProduct);const getCategoryIcon=categoryName=>{const name=categoryName.toLowerCase();if(name===\"accessories\")return/*#__PURE__*/_jsx(FaTshirt,{});if(name===\"camera\"||name===\"cameras\")return/*#__PURE__*/_jsx(FaCamera,{});if(name===\"cleaning\")return/*#__PURE__*/_jsx(FaBrush,{});if(name===\"components\")return/*#__PURE__*/_jsx(FaMicrochip,{});if(name===\"computers\")return/*#__PURE__*/_jsx(FaDesktop,{});if(name===\"drones\")return/*#__PURE__*/_jsx(FaPlane,{});if(name===\"electronics\")return/*#__PURE__*/_jsx(FaTv,{});if(name===\"furniture\")return/*#__PURE__*/_jsx(FaCouch,{});if(name===\"gadgets\")return/*#__PURE__*/_jsx(FaTools,{});if(name===\"gaming\")return/*#__PURE__*/_jsx(FaGamepad,{});if(name===\"laptop\"||name===\"laptops\")return/*#__PURE__*/_jsx(FaLaptop,{});if(name===\"monitoring\")return/*#__PURE__*/_jsx(FaTv,{});if(name===\"mounts\")return/*#__PURE__*/_jsx(FaTools,{});if(name===\"networking\")return/*#__PURE__*/_jsx(FaSitemap,{});if(name===\"office\")return/*#__PURE__*/_jsx(FaDesktop,{});if(name===\"peripherals\")return/*#__PURE__*/_jsx(FaMouse,{});if(name===\"power\")return/*#__PURE__*/_jsx(FaBatteryFull,{});if(name===\"storage\")return/*#__PURE__*/_jsx(FaHdd,{});if(name===\"vacuum\")return/*#__PURE__*/_jsx(FaBrush,{});if(name===\"wearables\")return/*#__PURE__*/_jsx(FaClock,{});return/*#__PURE__*/_jsx(FaBox,{});};const toggleSubCategories=category=>{setExpandedCategories(prev=>prev.includes(category)?prev.filter(cat=>cat!==category):[...prev,category]);};const toggleSidebar=()=>{setIsSidebarOpen(prev=>!prev);};const handlePageChange=pageNumber=>{setCurrentPage(pageNumber);window.scrollTo({top:0,behavior:\"smooth\"});};const renderPaginationButtons=()=>{const buttons=[];const maxVisiblePages=5;let startPage=Math.max(1,currentPage-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);if(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}for(let i=startPage;i<=endPage;i++){buttons.push(/*#__PURE__*/_jsx(\"button\",{className:`pagination-number ${currentPage===i?\"active\":\"\"}`,onClick:()=>handlePageChange(i),children:i},i));}return buttons;};return/*#__PURE__*/_jsxs(\"div\",{className:\"shop container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"shop__title\",children:selectedMainCategory===\"all\"?\"Nasze Produkty\":`Produkty w kategorii \"${selectedMainCategory.toUpperCase()}\"`}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop__container__main\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`hamburger-icon ${isSidebarOpen?\"active\":\"\"}`,onClick:toggleSidebar,\"aria-label\":\"Toggle sidebar\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"aside\",{className:`shop__sidebar ${isSidebarOpen?\"open\":\"closed\"}`,children:isLoadingCategories?/*#__PURE__*/_jsx(\"div\",{className:\"shop__loading-spinner\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"shop__sidebar-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shop__sidebar-item\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedMainCategory(\"all\");setSelectedSubCategory(\"all\");navigate(`/category/all`);},className:`shop__sidebar-button ${selectedMainCategory===\"all\"?\"active\":\"\"}`,children:[/*#__PURE__*/_jsx(IoHomeOutline,{className:\"shop__sidebar-icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shop__sidebar-name\",children:\"ALL PRODUCTS\"})]})}),mainCategories.map(mainCat=>{const isExpanded=selectedMainCategory===mainCat||expandedCategories.includes(mainCat);const hasSubCategories=subCategories.length>0&&selectedMainCategory===mainCat;return/*#__PURE__*/_jsxs(\"div\",{className:\"shop__sidebar-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shop__sidebar-main-category\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedMainCategory(mainCat);setSelectedSubCategory(\"all\");navigate(`/category/${mainCat}`);},className:`shop__sidebar-button ${selectedMainCategory===mainCat?\"active\":\"\"}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"shop__sidebar-category-icon\",children:getCategoryIcon(mainCat)}),/*#__PURE__*/_jsx(\"span\",{className:\"shop__sidebar-name\",children:mainCat.toUpperCase()})]}),categories.some(cat=>cat.startsWith(mainCat+\".\"))&&/*#__PURE__*/_jsx(\"button\",{className:\"shop__sidebar-toggle\",onClick:()=>toggleSubCategories(mainCat),children:isExpanded?/*#__PURE__*/_jsx(RiArrowUpSLine,{}):/*#__PURE__*/_jsx(RiArrowDownSLine,{})})]}),hasSubCategories&&isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"shop__sidebar-subcategories\",children:subCategories.map(subCat=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedSubCategory(subCat);navigate(`/category/${mainCat}.${subCat}`);},className:`shop__sidebar-subbutton ${selectedSubCategory===subCat?\"active\":\"\"}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"shop__sidebar-subdot\"}),/*#__PURE__*/_jsx(\"span\",{children:subCat.toUpperCase()})]},subCat))})]},mainCat);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop__products-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shop__products-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"shop__products-title\",children:\"Filtry:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop__filter-tags\",children:[selectedMainCategory!==\"all\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"shop__filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:selectedMainCategory.toUpperCase()}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedMainCategory(\"all\");setSelectedSubCategory(\"all\");navigate(`/category/all`);},children:\"\\xD7\"})]}),selectedSubCategory!==\"all\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"shop__filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:selectedSubCategory.toUpperCase()}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedSubCategory(\"all\");navigate(`/category/${selectedMainCategory}`);},children:\"\\xD7\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"shop__products\",children:isLoadingProducts?/*#__PURE__*/_jsx(\"div\",{className:\"shop__loading-spinner\"}):currentProducts.length>0?currentProducts.map(product=>/*#__PURE__*/_jsx(ShopProduct,{id:product.id,name:product.name,price:product.price,old_price:product.old_price,imgs:product.photos.map(photo=>`${config.apiUrl}/media/${photo.path}`),category:product.categories[0]||\"N/A\"},product.id)):/*#__PURE__*/_jsx(\"p\",{className:\"shop__no-products\",children:\"Brak produkt\\xF3w w tej kategorii.\"})}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pagination-info\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"pagination-text\",children:[\"Wy\\u015Bwietlanie \",indexOfFirstProduct+1,\" do\",\" \",Math.min(indexOfLastProduct,totalProducts),\" z\",\" \",totalProducts,\" produkt\\xF3w\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`pagination-button ${currentPage===1?\"disabled\":\"\"}`,onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,children:[/*#__PURE__*/_jsx(ChevronLeft,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"<\"})]}),renderPaginationButtons(),/*#__PURE__*/_jsxs(\"button\",{className:`pagination-button ${currentPage===totalPages?\"disabled\":\"\"}`,onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,children:[/*#__PURE__*/_jsx(ChevronRight,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\">\"})]})]})]})]})]})]});};export default ShopContent;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}