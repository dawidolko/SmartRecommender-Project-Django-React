{"ast":null,"code":"import React,{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{CartContext}from\"../ShopContext/ShopContext\";import{useFavorites}from\"../FavoritesContent/FavoritesContext\";import{AiOutlineHeart,AiFillHeart,AiOutlineSearch}from\"react-icons/ai\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ShopProduct=props=>{const{id,imgs,name,price,old_price,category}=props;const{items,addToCart}=useContext(CartContext);const{addToFavorites,removeFromFavorites,isFavorite}=useFavorites();const itemsInfo=items?items[id]:0;const[favorite,setFavorite]=useState(isFavorite(id));const[isImageEnlarged,setIsImageEnlarged]=useState(false);const navigate=useNavigate();const handleBoxClick=()=>{if(!isImageEnlarged){navigate(`/product/${id}`);}};const handleFavoriteToggle=e=>{e.stopPropagation();if(favorite){removeFromFavorites(id);toast.success(\"Removed from Favorites\",{position:\"top-center\",autoClose:3000,theme:\"colored\"});}else{addToFavorites({id,img:imgs[0],name,price});toast.success(\"Added to Favorites\",{position:\"top-center\",autoClose:3000,theme:\"colored\"});}setFavorite(!favorite);};const handleImageEnlarge=e=>{e.stopPropagation();setIsImageEnlarged(true);};const closeImageOverlay=e=>{e.stopPropagation();setIsImageEnlarged(false);};const handleOverlayClick=e=>{if(e.target===e.currentTarget){closeImageOverlay(e);}};const handleAddToCart=e=>{e.stopPropagation();addToCart(id);toast.success(\"Added to Cart\",{position:\"top-center\",autoClose:3000,theme:\"colored\"});};const handleNameClick=e=>{e.stopPropagation();if(!isImageEnlarged){navigate(`/product/${id}`);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shop__product\",onClick:handleBoxClick,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shop__image\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"img\",{className:\"shop__img\",src:imgs[0],alt:name,onClick:handleImageEnlarge}),/*#__PURE__*/_jsx(\"button\",{className:\"shop__favorite-btn\",onClick:handleFavoriteToggle,\"aria-label\":favorite?\"Remove from Favorites\":\"Add to Favorites\",children:favorite?/*#__PURE__*/_jsx(AiFillHeart,{className:\"shop__favorite-icon shop__favorite-icon--active\"}):/*#__PURE__*/_jsx(AiOutlineHeart,{className:\"shop__favorite-icon\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"shop__image-enlarge-btn\",onClick:handleImageEnlarge,\"aria-label\":\"Enlarge Image\",children:/*#__PURE__*/_jsx(AiOutlineSearch,{className:\"shop__image-enlarge-icon\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop__content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"p\",{className:\"shop__category__main\",children:`CATEGORY: ${category.replace(\".\",\" > \").toUpperCase()}`}),/*#__PURE__*/_jsx(\"p\",{className:\"shop__name\",onClick:handleNameClick,children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"shop__prices\",children:[old_price&&/*#__PURE__*/_jsxs(\"p\",{className:\"shop__price--discounted\",children:[\"$\",parseFloat(old_price).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"shop__price\",children:[\"$\",parseFloat(price).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"shop__btn\",onClick:handleAddToCart,children:[\"Add To Cart \",itemsInfo>0&&/*#__PURE__*/_jsxs(\"span\",{children:[\"( \",itemsInfo,\" )\"]})]})]})]},id),isImageEnlarged&&/*#__PURE__*/_jsx(\"div\",{className:\"common-shop-image-overlay\",onClick:handleOverlayClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"common-shop-image-overlay__content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"common-shop-image-overlay__close\",onClick:closeImageOverlay,\"aria-label\":\"Close Image\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"img\",{className:\"common-shop-image-overlay__image\",src:imgs[0],alt:name})]})})]});};export default ShopProduct;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}